/**
 * @modified $Author$
 * @version $Rev$
 */
!function(e){require.config({enable_ozma:true});define("tui/util/num",[],function(e,t){function n(e,t){var n="",i=e<0,r=String(Math.abs(e));if(r.length<t)n=new Array(t-r.length+1).join("0");return(i?"-":"")+n+r}function i(e,t){t=t.length;e=e||0;return 1==t?e:(e=String(Math.pow(10,t)+e)).substr(e.length-t)}function r(e,t){t=t||",";return String(e).replace(/(\d)(?=(\d{3})+($|\.))/g,"$1"+t)}function a(e){e=parseInt(e);var t;if(e>=1e8)t=(e/1e8).toFixed(2)+"亿";else if(e>=1e4){var n=e/1e4;var i=parseInt(n).toString();var a=i.length;if(a<4&&n!=i)i=n.toFixed(1==a?2:4-a);t=r(i)+"万"}else t=r(e);return t}function o(e){e=parseInt(e);var t=-1;do{e/=1024;t++}while(e>1024);return Math.max(e,.1).toFixed(1)+["KB","MB","GB","TB"][t]}t.pad=n;t.format=i;t.split=r;t.field=a;t.bytes=o});define("tui/class",[],function(){function t(){return function(){if(this.initialize)this.initialize.apply(this,arguments)}}function n(n,i){var r=this;var a=t();e.extend(a,r,i);var o=Object.create(r.prototype);o.constructor=a;a.prototype=o;e.extend(a.prototype,n);a.superClass=r.prototype;return a}var i=function(i){var r=t();e.extend(r.prototype,i);r.extend=n;return r};i.extend=n;return i});define("tui/event",["tui/class"],function(t){var n=t({initialize:function(){this.__event=window.Zepto?new window.Zepto.Events:e({})}});var i=n.prototype;["bind","one"].forEach(function(t){i[t]=function(n,i,r){if(e.isPlainObject(n))for(var a in n)this[t](a,n[a]);else{var o=this.__event;var s=function(){return i.apply(r||o,arguments.length>0?window.Zepto?arguments:Array.prototype.slice.call(arguments,1):[])};o[t].call(o,n,s);i.guid=s.guid}return this}});["unbind","trigger","triggerHandler"].forEach(function(e){i[e]=function(){var t=this.__event;if(require.debug)console.log("[event] "+this.constructor.__mid+" : "+arguments[0],arguments[1]);var n=t[e].apply(t,arguments);if(require.debug&&n!=t&&void 0!=n)console.log(n);return n}});i.fire=i.trigger;i.firing=i.triggerHandler;n.mix=function(t){return e.extend(t,new n)};return n});define("module/slider",["tui/event"],function(t){function n(t){if(t&&t.tagName){var n="a"==t.tagName.toLowerCase()?e(t):e(t).find("a");n=n.length?n:e(t);return(n.attr("rel")||n.attr("href").replace(/.*#(\d+)$/,"$1")||1)-1}else return 0}function i(e){var t=arguments;for(var n=0,i=t.length;n<i;n++){var e=t[n];if(e)clearTimeout(e)}return null}function r(){}var a=t.extend({initialize:function(t){var r=this;a.superClass.initialize.apply(r,arguments);r.op=t||{};r.op.slide=t.slide||false;r.op.linktab=t.linktab||false;r.op.clicktab=t.clicktab||false;var o=r.box=e(t.box);var s=r.tab=e(t.tab||".tab li",o);var l=r.panel=e(t.panel||".c",o);r.size=s.length||l.length;r.loop=t.loop||0;r.current=n(s.filter(".current")[0]);if(r.size<2)return;if(r.op.clicktab)s.click(function(e){e.preventDefault();r.go(n(this))});else{if(!r.op.linktab)s.click(function(e){e.preventDefault()});s.mouseenter(function(){i(r.timer,r.looptimer);var e=this;r.timer=setTimeout(function(){r.go(n(e))},30)}).mouseleave(function(){i(r.timer,r.looptimer);r.start()})}if(r.loop){r.check(r.op.clicktab?s:null);r.start()}s.parent().on("click","a",function(t){var n=e(this).attr("href");if(!n||"#"==n||n.length<5)t.preventDefault()})},go:function(e,t){var n=this;e=t?e:Math.min(Math.max(e,0),n.size-1);n.trigger("before",[n.current,e,n]);var i=n.current;n.current=e%n.size;n.tab.removeClass("current").eq(n.current).addClass("current");var r=n.op.fade;var a=n.panel;a.eq(i).css({"z-index":0});a.eq(n.current).css({"z-index":2})[r?"fadeIn":"show"](n.op.duration?n.op.duration:"100",function(){a.eq(i).hide()});n.trigger("after",[n.current,n])},prev:function(e){this.go(this.current-1,e)},next:function(e){this.go(this.current+1,e)},start:function(e){var t=this;if(t.loop){i(t.looptimer);if(e)t.start();t.looptimer=setTimeout(function(){t.start();t.next(true)},t.loop)}},stop:function(){i(this.looptimer)},check:function(e){var t=this;(e||t.panel).mouseenter(function(){i(t.looptimer)}).mouseleave(function(){i(t.looptimer);t.start()})}});return a});define("jquery",[],function(){});!function(){var e,t,n,i,r,a,o,s,l,u,c,d,f,p,v,h,m,g,b,w,y,x,_,k,T,M,$,C,L,D,S,z,I=[].slice;m='<span class="odometer-value"></span>';p='<span class="odometer-ribbon"><span class="odometer-ribbon-inner">'+m+"</span></span>";i='<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">'+p+"</span></span>";o='<span class="odometer-formatting-mark"></span>';n="(,ddd).dd";s=/^\(?([^)]*)\)?(?:(.)(d+))?$/;l=30;a=2e3;e=20;u=2;r=.5;c=1e3/l;t=1e3/e;v="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd";T=document.createElement("div").style;h=null!=T.transition||null!=T.webkitTransition||null!=T.mozTransition||null!=T.oTransition;_=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;b=function(e){var t;t=document.createElement("div");t.innerHTML=e;return t.children[0]};x=function(e,t){return e.className=e.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")};g=function(e,t){x(e,t);return e.className+=" "+t};M=function(e,t){var n;if(null!=document.createEvent){n=document.createEvent("HTMLEvents");n.initEvent(t,true,true);return e.dispatchEvent(n)}};y=function(){var e,t;return null!=(e=null!=(t=window.performance)?"function"===typeof t.now?t.now():void 0:void 0)?e:+new Date};k=function(e,t){if(null==t)t=0;if(!t)return Math.round(e);e*=Math.pow(10,t);e+=.5;e=Math.floor(e);return e/=Math.pow(10,t)};$=function(e){if(e<0)return Math.ceil(e);else return Math.floor(e)};w=function(e){return e-k(e)};L=false;(C=function(){var e,t,n,i,r;if(L)return;if(null!=window.jQuery){L=true;i=["html","text"];r=[];for(t=0,n=i.length;t<n;t++){e=i[t];r.push(function(e){var t;t=window.jQuery.fn[e];return window.jQuery.fn[e]=function(e){var n;if(null==e||null==(null!=(n=this[0])?n.odometer:void 0))return t.apply(this,arguments);return this[0].odometer.update(e)}}(e))}return r}})();setTimeout(C,0);f=function(){function e(t){var n,i,r,o,s,l,d,f,p,v,h=this;this.options=t;this.el=this.options.el;if(null!=this.el.odometer)return this.el.odometer;this.el.odometer=this;f=e.options;for(i in f){o=f[i];if(null==this.options[i])this.options[i]=o}if(null==(s=this.options).duration)s.duration=a;this.MAX_VALUES=0|this.options.duration/c/u;this.resetFormat();this.value=this.cleanValue(null!=(p=this.options.value)?p:"");this.renderInside();this.render();try{v=["innerHTML","innerText","textContent"];for(l=0,d=v.length;l<d;l++){r=v[l];if(null!=this.el[r])!function(e){return Object.defineProperty(h.el,e,{get:function(){var t;if("innerHTML"===e)return h.inside.outerHTML;else return null!=(t=h.inside.innerText)?t:h.inside.textContent},set:function(e){return h.update(e)}})}(r)}}catch(m){n=m;this.watchForMutations()}}e.prototype.renderInside=function(){this.inside=document.createElement("div");this.inside.className="odometer-inside";this.el.innerHTML="";return this.el.appendChild(this.inside)};e.prototype.watchForMutations=function(){var e,t=this;if(null==d)return;try{if(null==this.observer)this.observer=new d(function(e){var n;n=t.el.innerText;t.renderInside();t.render(t.value);return t.update(n)});this.watchMutations=true;return this.startWatchingMutations()}catch(n){e=n}};e.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:true})};e.prototype.stopWatchingMutations=function(){var e;return null!=(e=this.observer)?e.disconnect():void 0};e.prototype.cleanValue=function(e){var t;if("string"===typeof e){e=e.replace(null!=(t=this.format.radix)?t:".","<radix>");e=e.replace(/[.,]/g,"");e=e.replace("<radix>",".");e=parseFloat(e,10)||0}return k(e,this.format.precision)};e.prototype.bindTransitionEnd=function(){var e,t,n,i,r,a,o=this;if(this.transitionEndBound)return;this.transitionEndBound=true;t=false;r=v.split(" ");a=[];for(n=0,i=r.length;n<i;n++){e=r[n];a.push(this.el.addEventListener(e,function(){if(t)return true;t=true;setTimeout(function(){o.render();t=false;return M(o.el,"odometerdone")},0);return true},false))}return a};e.prototype.resetFormat=function(){var e,t,i,r,a,o,l,u;e=null!=(l=this.options.format)?l:n;e||(e="d");i=s.exec(e);if(!i)throw new Error("Odometer: Unparsable digit format");u=i.slice(1,4),o=u[0],a=u[1],t=u[2];r=(null!=t?t.length:void 0)||0;return this.format={repeating:o,radix:a,precision:r}};e.prototype.render=function(e){var t,n,i,r,a,o,s,l,u,c,d,f;if(null==e)e=this.value;this.stopWatchingMutations();this.resetFormat();this.inside.innerHTML="";o=this.options.theme;t=this.el.className.split(" ");a=[];for(l=0,c=t.length;l<c;l++){n=t[l];if(!n.length)continue;if(r=/^odometer-theme-(.+)$/.exec(n)){o=r[1];continue}if(/^odometer(-|$)/.test(n))continue;a.push(n)}a.push("odometer");if(!h)a.push("odometer-no-transitions");if(o)a.push("odometer-theme-"+o);else a.push("odometer-auto-theme");this.el.className=a.join(" ");this.ribbons={};this.digits=[];s=!this.format.precision||!w(e)||false;f=e.toString().split("").reverse();for(u=0,d=f.length;u<d;u++){i=f[u];if("."===i)s=true;this.addDigit(i,s)}return this.startWatchingMutations()};e.prototype.update=function(e){var t,n=this;e=this.cleanValue(e);if(!(t=e-this.value))return;x(this.el,"odometer-animating-up odometer-animating-down odometer-animating");if(t>0)g(this.el,"odometer-animating-up");else g(this.el,"odometer-animating-down");this.stopWatchingMutations();this.animate(e);this.startWatchingMutations();setTimeout(function(){n.el.offsetHeight;return g(n.el,"odometer-animating")},0);return this.value=e};e.prototype.renderDigit=function(){return b(i)};e.prototype.insertDigit=function(e,t){if(null!=t)return this.inside.insertBefore(e,t);else if(!this.inside.children.length)return this.inside.appendChild(e);else return this.inside.insertBefore(e,this.inside.children[0])};e.prototype.addSpacer=function(e,t,n){var i;i=b(o);i.innerHTML=e;if(n)g(i,n);return this.insertDigit(i,t)};e.prototype.addDigit=function(e,t){var n,i,r,a;if(null==t)t=true;if("-"===e)return this.addSpacer(e,null,"odometer-negation-mark");if("."===e)return this.addSpacer(null!=(a=this.format.radix)?a:".",null,"odometer-radix-mark");if(t){r=false;while(true){if(!this.format.repeating.length){if(r)throw new Error("Bad odometer format without digits");this.resetFormat();r=true}n=this.format.repeating[this.format.repeating.length-1];this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1);if("d"===n)break;this.addSpacer(n)}}i=this.renderDigit();i.querySelector(".odometer-value").innerHTML=e;this.digits.push(i);return this.insertDigit(i)};e.prototype.animate=function(e){if(!h||"count"===this.options.animation)return this.animateCount(e);else return this.animateSlide(e)};e.prototype.animateCount=function(e){var n,i,r,a,o,s=this;if(!(i=+e-this.value))return;a=r=y();n=this.value;return(o=function(){var l,u,c;if(y()-a>s.options.duration){s.value=e;s.render();M(s.el,"odometerdone");return}l=y()-r;if(l>t){r=y();c=l/s.options.duration;u=i*c;n+=u;s.render(Math.round(n))}if(null!=_)return _(o);else return setTimeout(o,t)})()};e.prototype.getDigitCount=function(){var e,t,n,i,r,a;i=1<=arguments.length?I.call(arguments,0):[];for(e=r=0,a=i.length;r<a;e=++r){n=i[e];i[e]=Math.abs(n)}t=Math.max.apply(Math,i);return Math.ceil(Math.log(t+1)/Math.log(10))};e.prototype.getFractionalDigitCount=function(){var e,t,n,i,r,a,o;r=1<=arguments.length?I.call(arguments,0):[];t=/^\-?\d*\.(\d*?)0*$/;for(e=a=0,o=r.length;a<o;e=++a){i=r[e];r[e]=i.toString();n=t.exec(r[e]);if(null==n)r[e]=0;else r[e]=n[1].length}return Math.max.apply(Math,r)};e.prototype.resetDigits=function(){this.digits=[];this.ribbons=[];this.inside.innerHTML="";return this.resetFormat()};e.prototype.animateSlide=function(e){var t,n,i,a,o,s,l,u,c,d,f,p,v,h,m,b,w,y,x,_,k,T,M,C,L,D,S,z;b=this.value;u=this.getFractionalDigitCount(b,e);if(u){e*=Math.pow(10,u);b*=Math.pow(10,u)}if(!(i=e-b))return;this.bindTransitionEnd();a=this.getDigitCount(b,e);o=[];t=0;for(f=x=0;0<=a?x<a:x>a;f=0<=a?++x:--x){w=$(b/Math.pow(10,a-f-1));l=$(e/Math.pow(10,a-f-1));s=l-w;if(Math.abs(s)>this.MAX_VALUES){d=[];p=s/(this.MAX_VALUES+this.MAX_VALUES*t*r);n=w;while(s>0&&n<l||s<0&&n>l){d.push(Math.round(n));n+=p}if(d[d.length-1]!==l)d.push(l);t++}else d=function(){z=[];for(var e=w;w<=l?e<=l:e>=l;w<=l?e++:e--)z.push(e);return z}.apply(this);for(f=k=0,M=d.length;k<M;f=++k){c=d[f];d[f]=Math.abs(c%10)}o.push(d)}this.resetDigits();S=o.reverse();for(f=T=0,C=S.length;T<C;f=++T){d=S[f];if(!this.digits[f])this.addDigit(" ",f>=u);if(null==(y=this.ribbons)[f])y[f]=this.digits[f].querySelector(".odometer-ribbon-inner");this.ribbons[f].innerHTML="";if(i<0)d=d.reverse();for(v=D=0,L=d.length;D<L;v=++D){c=d[v];m=document.createElement("div");m.className="odometer-value";m.innerHTML=c;this.ribbons[f].appendChild(m);if(v===d.length-1)g(m,"odometer-last-value");if(0===v)g(m,"odometer-first-value")}}if(w<0)this.addDigit("-");h=this.inside.querySelector(".odometer-radix-mark");if(null!=h)h.parent.removeChild(h);if(u)return this.addSpacer(this.format.radix,this.digits[u-1],"odometer-radix-mark")};return e}();f.options=null!=(S=window.odometerOptions)?S:{};setTimeout(function(){var e,t,n,i,r;if(window.odometerOptions){i=window.odometerOptions;r=[];for(e in i){t=i[e];r.push(null!=(n=f.options)[e]?(n=f.options)[e]:n[e]=t)}return r}},0);f.init=function(){var e,t,n,i,r,a;if(null==document.querySelectorAll)return;t=document.querySelectorAll(f.options.selector||".odometer");a=[];for(n=0,i=t.length;n<i;n++){e=t[n];a.push(e.odometer=new f({el:e,value:null!=(r=e.innerText)?r:e.textContent}))}return a};if(null!=(null!=(z=document.documentElement)?z.doScroll:void 0)&&null!=document.createEventObject){D=document.onreadystatechange;document.onreadystatechange=function(){if("complete"===document.readyState&&false!==f.options.auto)f.init();return null!=D?D.apply(this,arguments):void 0}}else document.addEventListener("DOMContentLoaded",function(){if(false!==f.options.auto)return f.init()},false);if("function"===typeof define&&define.amd)define("module/odometer",["jquery"],function(){return f});else if(typeof exports===!"undefined")module.exports=f;else window.Odometer=f}.call(this);define("tui/drag",["tui/event"],function(t){var n=e(window);function i(){if(window.getSelection)window.getSelection().removeAllRanges();else if(document.selection)document.selection.empty();return this}function r(e){e.preventDefault()}var a=t.extend({initialize:function(t,o){var s=this;o=o||{};var l=o.handler||t;a.superClass.initialize.call(s);s.limit=o.limit;s.bubble=o.bubble;s.isCustom=o.isCustom;s.enable2=true;s.state2=false;s.hasMove2=false;s.fx=s.fy=-1;s.x2=s.y2=s.mx2=s.my2=s.px2=s.py2=s.cx2=s.cy2=0;s.node2="string"==e.type(t)?e(t):t;s.container2=o.container||s.node2.parent();s.fixed2="fixed"==s.node2.css("position").toLowerCase();s.handler2="string"==e.type(l)?e(l):l;var u=s.handler2||s.node2;function c(e){e.preventDefault();if(!s.bubble||e.target==u[0]){s.start(e);if(u[0].setCapture)u[0].setCapture()}}u.bind("mousedown",c);function d(t){if(s.state2){s.state2=false;var i=t.pageX-s.mx2+s.x2-s.px2,a=t.pageY-s.my2+s.y2-s.py2;if(s.fixed2){i-=n.scrollLeft();a-=n.scrollTop()}if(s.limit){i=Math.max(i,s.cx2-s.px2);a=Math.max(a,s.cy2-s.py2);i=Math.min(i,s.cWidth-(s.px2-s.cx2)-s.dWidth);a=Math.min(a,s.cHeight-(s.py2-s.cy2)-s.dHeight)}s.x2=s.node2.offset().left;s.y2=s.node2.offset().top;s.trigger("drag:end",[i,a,t.pageX,t.pageY,s.node2,s.container2])}e(document).unbind("selectstart",r);if(u[0].releaseCapture)u[0].releaseCapture()}e(document).bind("mouseup",d);function f(e){if(s.state2&&s.enable2){if(!s.hasMove()&&e.pageX==s.fx&&e.pageY==s.fy);else s.hasMove2=true;var t=e.pageX-s.mx2+s.x2-s.px2,r=e.pageY-s.my2+s.y2-s.py2;if(s.fixed2){t-=n.scrollLeft();r-=n.scrollTop()}if(s.limit){t=Math.max(t,s.cx2-s.px2);r=Math.max(r,s.cy2-s.py2);t=Math.min(t,s.cWidth-(s.px2-s.cx2)-s.dWidth);r=Math.min(r,s.cHeight-(s.py2-s.cy2)-s.dHeight)}if(!s.isCustom)s.node2.css({left:t,top:r});i();s.trigger("drag:move",[t,r,e.pageX,e.pageY,s.node2,s.container2])}}e(document).bind("mousemove",f);s.cancel=function(){u.unbind("mousedown",c);e(document).unbind("mouseup",d);e(document).unbind("mousemove",f)}},start:function(t){var n=this;e(document).bind("selectstart",r);n.offsetParent2=n.node2.offsetParent();if(n.limit){n.cWidth=n.container2.outerWidth();n.cHeight=n.container2.outerHeight();n.pWidth=n.offsetParent2.outerWidth();n.pHeight=n.offsetParent2.outerHeight();n.dWidth=n.node2.outerWidth();n.dHeight=n.node2.outerHeight()}n.fx=t.pageX;n.fy=t.pageY;n.cx2=n.container2.offset().left;n.cy2=n.container2.offset().top;n.px2=n.offsetParent2.offset().left;n.py2=n.offsetParent2.offset().top;n.x2=n.node2.offset().left;n.y2=n.node2.offset().top;n.mx2=t.pageX;n.my2=t.pageY;n.state2=true;n.trigger("drag:start",[n.x2,n.y2,t.pageX,t.pageY,n.node2,n.container2]);return this},enable:function(){this.enable2=true;return this},disable:function(){this.enable2=false;return this},state:function(){return this.state2},hasMove:function(){return this.hasMove2}});return a});define("tui/art",[],function(){var e=window;var t=function(e,n){return t["string"===typeof n?"compile":"render"].apply(t,arguments)};t.version="2.0.2";t.openTag="<%";t.closeTag="%>";t.isEscape=true;t.isCompress=false;t.parser=null;t.render=function(e,n){var i=t.get(e)||r({id:e,name:"Render Error",message:"No Template"});return i(n)};t.compile=function(e,i){var o=arguments;var s=o[2];var l="anonymous";if("string"!==typeof i){s=o[1];i=o[0];e=l}try{var u=a(e,i,s)}catch(c){c.id=e||i;c.name="Syntax Error";return r(c)}function d(n){try{return new u(n,e)+""}catch(a){if(!s)return t.compile(e,i,true)(n);return r(a)()}}d.prototype=u.prototype;d.toString=function(){return u.toString()};if(e!==l)n[e]=d;return d};var n=t.cache={};var i=t.helpers=function(){var e=function(t,n){if("string"!==typeof t){n=typeof t;if("number"===n)t+="";else if("function"===n)t=e(t.call(t));else t=""}return t};var n={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};var i=function(t){return e(t).replace(/&(?![\w#]+;|#\d+)|[<>"']/g,function(e){return n[e]})};var r=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)};var a=function(e,t){if(r(e))for(var n=0,i=e.length;n<i;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)};return{$include:t.render,$string:e,$escape:i,$each:a}}();t.helper=function(e,t){i[e]=t};t.onerror=function(t){var n="Template Error\n\n";for(var i in t)n+="<"+i+">\n"+t[i]+"\n\n";if(e.console)console.error(n)};t.get=function(i){var r;if(n.hasOwnProperty(i))r=n[i];else if("document"in e){var a=document.getElementById(i);if(a){var o=a.value||a.innerHTML;r=t.compile(i,o.replace(/^\s*|\s*$/g,""))}}return r};var r=function(e){t.onerror(e);return function(){return"{Template Error}"}};var a=function(){var e=i.$each;var n="break,case,catch,continue,debugger,default,delete,do,else,false"+",finally,for,function,if,in,instanceof,new,null,return,switch,this"+",throw,true,try,typeof,var,void,while,with"+",abstract,boolean,byte,char,class,const,double,enum,export,extends"+",final,float,goto,implements,import,int,interface,long,native"+",package,private,protected,public,short,static,super,synchronized"+",throws,transient,volatile"+",arguments,let,yield"+",undefined";var r=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g;var a=/[^\w$]+/g;var o=new RegExp(["\\b"+n.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var s=/^\d[^,]*|,\d[^,]*/g;var l=/^,+|,+$/g;var u=function(e){return e.replace(r,"").replace(a,",").replace(o,"").replace(s,"").replace(l,"").split(/^$|,+/)};return function(n,r,a){var o=t.openTag;var s=t.closeTag;var l=t.parser;var c=r;var d="";var f=1;var p={$data:1,$id:1,$helpers:1,$out:1,$line:1};var v={};var h="var $helpers=this,"+(a?"$line=0,":"");var m="".trim;var g=m?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"];var b=m?"if(content!==undefined){$out+=content;return content;}":"$out.push(content);";var w="function(content){"+b+"}";var y="function(id,data){"+"data=data||$data;"+"var content=$helpers.$include(id,data,$id);"+b+"}";e(c.split(o),function(e,t){e=e.split(s);var n=e[0];var i=e[1];if(1===e.length)d+=k(n);else{d+=T(n);if(i)d+=k(i)}});c=d;if(a)c="try{"+c+"}catch(e){"+"throw {"+"id:$id,"+"name:'Render Error',"+"message:e.message,"+"line:$line,"+"source:"+C(r)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')"+"};"+"}";c=h+g[0]+c+"return new String("+g[3]+");";try{var x=new Function("$data","$id",c);x.prototype=v;return x}catch(_){_.temp="function anonymous($data,$id) {"+c+"}";throw _}function k(e){f+=e.split(/\n/).length-1;if(t.isCompress)e=e.replace(/[\n\r\t\s]+/g," ").replace(/<!--.*?-->/g,"");if(e)e=g[1]+C(e)+g[2]+"\n";return e}function T(e){var n=f;if(l)e=l(e);else if(a)e=e.replace(/\n/g,function(){f++;return"$line="+f+";"});if(0===e.indexOf("=")){var r=0!==e.indexOf("==");e=e.replace(/^=*|[\s;]*$/g,"");if(r&&t.isEscape){var o=e.replace(/\s*\([^\)]+\)/,"");if(!i.hasOwnProperty(o)&&!/^(include|print)$/.test(o))e="$escape("+e+")"}else e="$string("+e+")";e=g[1]+e+g[2]}if(a)e="$line="+n+";"+e;M(e);return e+"\n"}function M(t){t=u(t);e(t,function(e){if(!p.hasOwnProperty(e)){$(e);p[e]=true}})}function $(e){var t;if("print"===e)t=w;else if("include"===e){v["$include"]=i["$include"];t=y}else{t="$data."+e;if(i.hasOwnProperty(e)){v[e]=i[e];if(0===e.indexOf("$"))t="$helpers."+e;else t=t+"===undefined?$helpers."+e+":"+t}}h+=e+"="+t+","}function C(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}}}();return t});define("tui/widget",["tui/event","tui/art"],function(t,n){function i(e,t){var n;var i;var r=e.split(" ");if(1==r.length){n=t;i=e}else{n=r.shift();i=r.join(" ")}return[n,i]}var r=t.extend({element:null,template:"<div></div>",eventType:"click",model:{},events:{},targetNode:e(document.body),renderMethod:"append",initialize:function(t){var n=this;t=t||{};r.superClass.initialize.call(n);n.model=e.extend(true,{},n.model);n.events=e.extend(true,{},n.events);e.each(["element","targetNode"],function(){"undefined"!==typeof t[this]&&(n[this]=e(t[this]))});e.each(["template","eventType","renderMethod"],function(){"undefined"!==typeof t[this]&&(n[this]=t[this])});e.each(["model","events"],function(){"undefined"!==typeof t[this]&&e.extend(n[this],t[this])})},find:function(e){return this.element.find(e)},delegate:function(t,n){var r=this;if("string"==e.type(t)&&e.isFunction(n)){var a={};a[t]=n;t=a}e.each(t,function(t,n){var a=function(t){if(e.isFunction(n))return n.call(r,t);else return r[n](t)};var o=i(t,r.eventType);r.element.on(o[0],o[1],a)});return r},undelegate:function(e){var t=this;var n=i(e,t.eventType);t.element.off(n[0],n[1]);return t},render:function(t){var i=this;if(!i.element||!i.element[0])i.element=e(n.compile(i.template)(e.extend({getUrl:this.getUrl||a},t||i.model)));i.delegate(i.events);if(i.renderMethod)i.targetNode[i.renderMethod](i.element);i.trigger("render:success",[]);return i},update:function(t){if(this.renderMethod){this.targetNode[this.renderMethod](n.compile(this.template)(e.extend({getUrl:this.getUrl||a},t)));self.trigger("update:success",[])}}});function a(e){return e}return r});define("tui/mask",[],function(){var t=e('<div class="tui_mask">');var n;var i=e(window);var r=e(document);var a=e(document.body);var o=e.browser.msie&&e.browser.version<7;var s=4096;function l(){var n=Math.max(i.width(),r.width());var a=Math.max(i.height(),r.height());var l="absolute";var u=0;if(e.browser.msie&&a>s){if(!o)l="fixed";else{u=i.scrollTop();if(u+s>a)u=a-s}a=s}t.css({position:l,top:u,width:n,height:a})}return{node:function(){return t},resize:function(){l()},show:function(e){i.bind("resize",l);if(o)i.bind("scroll",l);t.css("z-index",e||9e4);this.resize();if(!n){a.append(t);n=true}else t.show();return this},hide:function(e){i.unbind("resize",l);if(o)i.unbind("scroll",l);if(e){t.remove();n=false}else t.hide();return this},update:function(){l()},state:function(){return t.is(":visible")}}});define("tui/browser",[],function(){var t=navigator.userAgent.toLowerCase();var n={ie6:e.browser.msie&&6==e.browser.version,html5:function(){var e=document.createElement("input");var t=document.createElement("video");return{h264:!!(t.canPlayType&&t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,"")),history:!!(window.history&&window.history.pushState&&window.history.popState),placeholder:"placeholder"in e}},lang:(navigator.language||navigator.systemLanguage).toLowerCase(),iOS:(t.match(/(ipad|iphone|ipod)/)||[])[0],iOSVersion:(t.match(/os\s+([\d_]+)\s+like\s+mac\s+os/)||[0,"0_0_0"])[1].split("_"),wphone:parseFloat((t.match(/windows\sphone\s(?:os\s)?([\d.]+)/)||["","0"])[1]),android:parseFloat((t.match(/android[\s|\/]([\d.]+)/)||["","0"])[1])};n.isMobile=!!n.iOS||!!n.wphone||!!n.android||void 0!==window.orientation||false;n.isPad=n.isMobile&&("ipad"==n.iOS||t.indexOf("mobile")==-1||t.indexOf("windows nt")!=-1&&t.indexOf("touch")!=-1)||false;return n});define("tui/dialog",["tui/browser","tui/art","tui/mask","tui/widget","tui/drag"],function(t,n,i,r,a){var o=e(window);var s=e.browser.msie&&e.browser.version<=7||!e.support.boxModel;var l=10002;var u='<div class="tui_dialog_button"><% for (var i = 0; i < buttons.length; i++) { %>'+'<a data-role="button_<%=i%>" href="#" <%if(buttons[i].className){%>class="<%=buttons[i].className%>"<%}%>><%=buttons[i].name%></a>'+"<% } %></div>";var c='<div class="tui_dialog <%=className%>"><div<% if (hasWrap) { %> class="tui_dialog_wrap"<% } %>><div class="tui_dialog_holder" data-role="holder">'+'<div class="tui_dialog_resize"></div>'+'<div class="tui_dialog_w_tp"></div><div class="tui_dialog_w_bm"></div>'+'<div class="tui_dialog_w_lf"></div><div class="tui_dialog_w_rt"></div>'+'<div class="tui_dialog_w_tl"></div><div class="tui_dialog_w_tr"></div>'+'<div class="tui_dialog_w_bl"></div><div class="tui_dialog_w_br"></div>'+'<div class="tui_dialog_header" data-role="header"><span class="tui_dialog_close" data-role="close" title="关闭">X</span>'+'<div class="tui_dialog_title" data-role="title"><%=title%></div><div class="tui_dialog_bar"><%=bar%></div></div>'+'<div class="tui_dialog_content" data-role="content"></div>'+'<% if (buttons.length > 0) { %><div class="tui_dialog_footer" data-role="footer">'+u+"</div><% } %>"+'<% if (info) { %><div class="tui_dialog_info"><%=info%></div><% } %>'+"</div></div></div>";var d=r.extend({events:{"click [data-role=close]":function(e){e.preventDefault();this.close()}},initialize:function(t){var i=this;var r={template:c,buttons:[],zIndex:l,hasDrag:true,hasMask:true,isFixed:true};t=e.extend(r,t||{});l=t.zIndex;var a=e.browser.msie&&parseFloat(e.browser.version)<9;if("undefined"!=typeof t.hasWrap)a=t.hasWrap;var o={hasWrap:a,className:t.className||"tudou_dialog",title:t.title||"",bar:t.bar||"",info:t.info||"",buttons:t.buttons};t.element=e(n.compile(t.template)(o));d.superClass.initialize.call(this,t);i.dom={holder:i.element.find("[data-role=holder]"),header:i.element.find("[data-role=header]"),title:i.element.find("[data-role=title]"),content:i.element.find("[data-role=content]"),footer:i.element.find("[data-role=footer]"),close:i.element.find("[data-role=close]")};i.config=t;i.open();var s=function(t){if(27==t.keyCode){i.close();e(document).unbind("keydown",s)}};e(document).keydown(s)},title:function(e){this.dom.title.html(e);return this},content:function(e){this.dom.content.html(e);return this},open:function(){var t=this;var n=t.config;var r=t.element;var u=t.dom;r.css("z-index",l);l+=2;if(n.hasMask)i.show(r.css("z-index")-1);r.css("position",s||!n.isFixed?"absolute":"fixed");t.iframeMask=e("<iframe>",{src:"about:blank",frameborder:0,css:{border:"none","z-index":-1,position:"absolute",top:0,left:0,width:"100%",height:"100%"}}).prependTo(u.holder);t.content(n.content||"");e.each(n.buttons,function(e){t.events["[data-role=button_"+e+"]"]=this.callback});if(!t.element.parent()[0])t.render();t.element.show();t.locate();t.resizeLocate=function(e){t.locate()};o.bind("resize",t.resizeLocate);if(s&&n.isFixed){t.iefixScroll=function(e){t.locate()};o.bind("scroll",t.iefixScroll);t.iframeMask.css({height:u.holder.height()})}if(t.config.hasDrag)new a(r,{handler:u.header,limit:true});return t},close:function(e){var t=this;if(t.config.hasMask)i.hide(true);t.trigger("close",[t]);if(!e)t.element.find("iframe").remove();t.element[e?"hide":"remove"]();if(t.resizeLocate)o.unbind("resize",t.resizeLocate);if(t.iefixScroll){o.unbind("scroll",t.iefixScroll);t.iefixScroll=null}return t},locate:function(){var e=this;var t=Math.max(0,o.width()-e.element.width()>>1);if(!e.config.isFixed)var n=o.scrollTop()+(o.height()-e.element.height())/2;else var n=Math.max(0,o.height()-e.element.height()>>1)+(s?o.scrollTop():0);e.element.css({left:t,top:n});return e}});d.confirm=function(t,n){var i={};if(e.isPlainObject(t)){i=t;t=i.msg;n=i.callback}return new d(e.extend({className:"tudou_dialog alert",title:"提示",content:'<div class="tui_dialog_text">'+t+"</div>",hasMask:true,buttons:[{name:"确定",callback:function(e){e.preventDefault();n&&n.call(this);this.close()}},{name:"取消",callback:function(e){e.preventDefault();this.close()}}]},i))};d.alert=function(t,n){var i={};if(e.isPlainObject(t)){i=t;t=i.msg;n=i.callback}return new d(e.extend({className:"tudou_dialog alert",title:"提示",content:'<div class="tui_dialog_text">'+t+"</div>",hasMask:true,buttons:[{name:"确定",callback:function(e){e.preventDefault();n&&n.call(this);this.close()}}]},i))};return d});define("tui/nprogress",[],function(t,n){var i={};var r=e(document.body);i.version="0.1.6";var a=i.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:true,trickleRate:.02,trickleSpeed:800,showSpinner:true,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};i.configure=function(t){return e.extend(a,t||{})};i.status=null;i.set=function(e){var t=i.isStarted();e=o(e,a.minimum,1);i.status=1===e?null:e;var n=i.render(!t),r=n.find(a.barSelector),s=a.speed,c=a.easing;n[0].offsetWidth;u(function(t){r.css(l(e,s,c));if(1===e){n.css({transition:"none",opacity:1});n[0].offsetWidth;setTimeout(function(){n.css({transition:"all "+s+"ms linear",opacity:0});setTimeout(function(){i.remove();t()},s)},s)}else setTimeout(t,s)});return this};i.isStarted=function(){return"number"===typeof i.status};i.start=function(){if(!i.status)i.set(0);var e=function(){setTimeout(function(){if(!i.status)return;i.trickle();e()},a.trickleSpeed)};if(a.trickle)e();return this};i.done=function(e){if(!e&&!i.status)return this;return i.inc(.3+.5*Math.random()).set(1)};i.inc=function(e){var t=i.status;if(!t)return i.start();else{if("number"!==typeof e)e=(1-t)*o(Math.random()*t,.1,.95);t=o(t+e,0,.994);return i.set(t)}};i.trickle=function(){return i.inc(Math.random()*a.trickleRate)};!function(){var e=0,t=0;i.promise=function(n){if(!n||"resolved"==n.state())return this;if(0==t)i.start();e++;t++;n.always(function(){t--;if(0==t){e=0;i.done()}else i.set((e-t)/e)});return this}}();i.render=function(t){if(""===a.positionUsing)a.positionUsing=i.getPositioningCSS();if("margin"===a.positionUsing)a.showSpinner=false;if(i.isRendered())return e("#nprogress");r.addClass("nprogress-busy");var n=e('<div id="nprogress">'+a.template+"</div>");var o=n.find(a.barSelector),l=t?"-100":s(i.status||0),u=e(a.parent),c;o.css({transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"});if(!a.showSpinner){c=n.find(a.spinnerSelector);c.length&&c.remove()}if(u[0]!=document.body)u.addClass("nprogress-custom-parent");u.append(n);return n};i.remove=function(){r.removeClass("nprogress-busy");e(a.parent).removeClass("nprogress-custom-parent");var t=e("#nprogress");t.length&&t.remove()};i.isRendered=function(){return e("#nprogress").length
};i.getPositioningCSS=function(){var e=document.body.style;var t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";if(t+"Perspective"in e)return"translate3d";else if(t+"Transform"in e)return"translate";else return"margin"};function o(e,t,n){if(e<t)return t;if(e>n)return n;return e}function s(e){return 100*(-1+e)}function l(e,t,n){var i;if("translate3d"===a.positionUsing)i={transform:"translate3d("+s(e)+"%,0,0)"};else if("translate"===a.positionUsing)i={transform:"translate("+s(e)+"%,0)"};else i={"margin-left":s(e)+"%"};i.transition="all "+t+"ms "+n;return i}var u=function(){var e=[];function t(){var n=e.shift();if(n)n(t)}return function(n){e.push(n);if(1==e.length)t()}}();return i});define("m/model",["tui/nprogress","tui/dialog","tui/event"],function(t,n,i){function r(n){var i=0;var r=n.success;var a=n.error;delete n.success;delete n.error;n.timeout=1e4;n.nprogress&&t.start();n.success=function(e){if(!e){n.error();return}r.apply(this,Array.prototype.slice.call(arguments));n.nprogress&&t.done()};n.error=function(){i++;if(i<2)e.ajax(n);else{a&&a.apply(this,Array.prototype.slice.call(arguments));n.nprogress&&t.done()}};e.ajax(n)}var a=window.base_domain||"";if("127.0.0.1"===location.host)a="http://www.jishachengta.com.cn";var o=a+"/api/ajax";return{load:r,event:new i,getData:function(e,t,i,a){r({url:o+"?callback=?",data:e,dataType:"jsonp",success:function(e){if(e.errno){console.log(e);i&&i(e);n.alert(e.msg||"")}else t&&t(e)},nprogress:a})},postData:function(t,i,r){return e.post(o,t,function(e){if(e.errno){console.log(e);r&&r(e);n.alert(e.msg||"")}else i&&i(e)},"json")},autoData:function(e,t,n){}}});define("tui/countdown",[],function(){return function(t,n,i){var n=n||3;var r;var t=e(t).html(n);r=setInterval(function(){n--;if(n<=0){clearInterval(r);if(i)i()}t.html(n)},1e3);return{close:function(){clearInterval(r)}}}});define("tui/placeholder",["tui/event"],function(t){var n="placeholder"in document.createElement("input"),i=[],r=t.extend({initialize:function(t,i){var a=this;r.superClass.initialize.apply(a,arguments);t=e(t);a.item=t;var o=a.ph=t.attr("placeholder");if(""==o)return;if(i)a.state2=i;else if(o==t.val()||""==t.val())a.state2=true;else a.state2=false;if(!n&&a.state2){t.val(o);a.trigger("placeholder",[t,a.state2])}a.focus=function(){if(a.state2){!n&&t.val("");a.state2=false;a.trigger("placeholder",[t,a.state2])}};a.blur=function(){var e=t.val();if(""==e)!n&&t.val(o);a.state2=""==e;if(a.state2)a.trigger("placeholder",[t,a.state2])};t.focus(a.focus).bind("blur",a.blur)},state:function(e){var t=this;if(void 0!==e){t.state2=e;if(e)t.restore()}return t.state2},restore:function(){var e=this;if(!e.state2&&!n){e.state2=true;e.item.val(e.ph);e.trigger("placeholder",[e.item,e.state2])}},cancel:function(){var e=this;e.item.unbind("focus",e.focus).unbind("blur",e.blur);var t=i.indexOf(e.item[0]);if(t>-1)i.splice(t,1);return e}});r.NATIVE=n;return r});define("tui/limitTextarea",["tui/event"],function(t){var n=e.browser.msie&&"9.0"==e.browser.version;function i(e){var t=parseInt(e.attr("maxlength")),n=e.val();if(!isNaN(t)&&n.length>t){var i,r,a=document.selection.createRange(),o=document.body.createTextRange();o.moveToElementText(e[0]);r=a.getBookmark();for(i=0;o.compareEndPoints("StartToStart",a)<0&&0!==a.moveStart("character",-1);i++)if("\n"==n.charAt(i))i++;e.val(n.substr(0,Math.min(t,i-1))+n.substr(i,Math.min(t,n.length)));if(n.length!=i){var s=e[0].createTextRange();s.collapse(true);s.moveEnd("character",i-1);s.moveStart("character",i-1);s.select()}}}function r(e,t){var n=t.val();e.trigger("input",[n.length,parseInt(t.attr("maxlength"))])}var a=t.extend({initialize:function(t){var o=this;a.superClass.initialize.apply(o,arguments);if("string"==e.type(t))t=e(t);if(window.addEventListener){t.bind("input",function(){if(n)i(t);r(o,t)});if(n)t.bind("keydown cut paste",function(e){switch(e.type){case"keydown":if(46!=e.keyCode&&8!=e.keyCode)return;default:setTimeout(function(){i(t);r(o,t)},0)}})}else t.bind("propertychange",function(){i(t);r(o,t)})}});return a});define("tui/html5formcore",["tui/event","tui/limitTextarea","tui/placeholder"],function(t,n,i){var r=e.browser.msie&&"9.0"==e.browser.version,a={url:/^\s*[a-zA-z]+:\/\/.*$/,email:/^\s*\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*\s*$/,number:/^\s*-?\.*\d+\s*$/,date:/^\s*\d{2,4}-\d{1,2}-\d{1,2}\s*$/,time:/^\s*\d{1,2}:\d{1,2}(:\d{1,2}(\.\d{1,3})?)?\s*$/,color:/^\s*#?[a-z\d]{3,6}\s*$/},o=document.createElement("input"),s="autofocus"in o,l="form"in o,u=":input:not(:button, :submit, :radio, :checkbox, :reset)",c=t.extend({initialize:function(t,a,o){var l=this;c.superClass.initialize.apply(l,arguments);if("string"==e.type(t))t=e(t);l.form2=t;l.type2=o=o||c.VALID_BLUR;l.list2=[];l.ph2=[];if("function"!=e.type(a)){o=a;a=void 0}if(!t[0]||"FORM"!=t[0].nodeName)return;if(!s)t.find(":input").each(function(){if(null!=this.getAttribute("autofocus")){var t=e(this);t.focus()}});if(!i.NATIVE)t.find("input[placeholder]").each(function(){var t=e(this),n=new i(t);l.list2.push(this);l.ph2.push(n);n.bind("placeholder",function(e,t){l.trigger("placeholder",[e,t])})});l.focusout2=function(){t.attr("novalidate")||l.valid(e(this))};if(o==c.VALID_BLUR)t.delegate(u,"focusout",l.focusout2);var d=[];l.focusin2=function(){var t=e(this);if("TEXTAREA"==this.nodeName&&d.indexOf(this)==-1){new n(t);d.push(this)}l.trigger("focus",[t])};t.delegate(u,"focusin",l.focusin2);l.input2=function(){l.trigger("input",[e(this)])};l.keydown_cut_paste2=function(t){var n=e(this);switch(t.type){case"keydown":if(46!=t.keyCode&&8!=t.keyCode)return;default:setTimeout(function(){l.trigger("input",[n])},0)}};if(window.addEventListener){t.delegate(u,"input",l.input2);if(r)t.delegate("textarea","keydown cut paste",l.keydown_cut_paste2)}else t.delegate(u,"keydown contextmenu",l.input2);t.delegate("input:text[name]","keypress",function(e){if(13==e.keyCode){e.preventDefault();t.submit()}});l.click2=function(e){e.preventDefault();t.submit()};t.delegate("input:submit","click",l.click2);l.submit2=function(e){var n=t.attr("novalidate")||l.validAll();if(n){if(a)return a.call(this,e)}else e.preventDefault()};t.bind("submit",l.submit2)},valid:function(e){var t=this.form2,n=e.val(),i=(e[0].getAttribute("type")||"text").toLowerCase(),r=e.attr("pattern"),o=null!=e[0].getAttribute("required"),s=this.list2.indexOf(e[0]);if(o&&(""==n||s!=-1&&this.ph2[s].state())&&!this.ignore(e)){this.trigger("required",[e]);return false}if(n&&n.length&&"INPUT"==e[0].nodeName&&!this.ignore(e)&&a[i]&&!a[i].test(n)){this.trigger(i,[e]);return false}if(n&&n.length&&"number"==i&&!this.ignore(e)){var l=parseFloat(e.attr("max")),u=parseFloat(e.attr("min")),c=parseFloat(n);if(!isNaN(l)&&c>l){this.trigger("max",[e,l]);return false}if(!isNaN(u)&&c<u){this.trigger("min",[e,u]);return false}}if(r&&r.length&&"text"==i&&n&&!this.ignore(e)){if(s!=-1&&this.ph2[s].state())return true;r=new RegExp(r);if(!r.test(n)){this.trigger("pattern",[e]);return false}}return true},validAll:function(){var e=this,t=true,n=e.form2.find(u);n.each(function(i){t=t&&e.valid(n.eq(i))});return t},ignore:function(t){if("string"==e.type(t))t=e(t);return t.prop("disabled")||null!=t[0].getAttribute("novalidate")},type:function(){return this.type2},placeholder:function(t,n){t=e(t);var i=this.list2.indexOf(t[0]);if(i!=-1)return this.ph2[i];console.error("placeholder not found: "+t[0])},cancel:function(){this.form2.undelegate(u,"focusout",this.focusout2);this.form2.undelegate(u,"focusin",this.focusin2);this.form2.undelegate(u,"input",this.input2);if(r)this.form2.undelegate("textarea","keydown cut paste",this.keydown_cut_paste2);this.form2.undelegate(u,"keydown contextmenu",this.input2);this.form2.undelegate("input:submit","click",this.click2);this.form2.unbind("submit",this.submit2);this.ph2.forEach(function(e){e.cancel()})}});c.VALID_BLUR=1;c.VALID_SUBMIT=2;c.SELECTOR=u;return c});define("tui/template",[],function(t,n){n.ns=function(e,t,n){var i,r=n||window,a=e.split(".").reverse();while((i=a.pop())&&a.length>0){if("undefined"===typeof r[i])r[i]={};else if("object"!==typeof r[i])return false;r=r[i]}if("undefined"!==typeof t)r[i]=t;return r[i]};n.format=function(e,t){return e.replace(/<%\=(\w+)%>/g,function(e,n){return null!=t[n]?t[n]:""})};n.escapeHTML=function(e){e=e||"";var t={"<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","{":"&#123;","}":"&#125;","@":"&#64;"};return e.replace(/[<>'"\{\}@]/g,function(e){return t[e]})};n.substr=function(e,t,n){if(!e||"string"!==typeof e)return"";var i=e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/([^\x00-\xff])\s/g,"$1");return n?n.call(i,i):e.length>i.length?i+"...":i};n.strsize=function(e){return e.replace(/([^\x00-\xff]|[A-Z])/g,"$1 ").length};var i=this.document;n.tplSettings={_cache:{},evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};n.tplHelpers={mix:e.extend,escapeHTML:n.escapeHTML,substr:n.substr,include:r,_has:function(e){return function(t){return n.ns(t,void 0,e)}}};function r(e,t,a){var o,s=n.tplSettings,l=a?"#"+a:"";if(!/[\t\r\n% ]/.test(e)){o=s._cache[e+l];if(!o){var u=i.getElementById(e);if(u)o=s._cache[e+l]=r(u.innerHTML,false,a)}}else{var c="var __p=[];"+(a?"":"with(obj){")+"var mix=api.mix,escapeHTML=api.escapeHTML,substr=api.substr,include=api.include,has=api._has("+(a||"obj")+");"+"__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(s.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(s.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');"+(a?"":"}")+"return __p.join('');";try{o=new Function(a||"obj","api",c)}catch(d){console.log("Could not create a template function: \n"+c)}}return!o?"":t?o(t,n.tplHelpers):o}n.convertTpl=r;n.reloadTpl=function(e){delete n.tplSettings._cache[e]}});define("tui/html5form",["tui/template","tui/html5formcore","tui/placeholder"],function(t,n,i){var r='<div class="g_tip"><h3><%=msg%></h3><% if(info && info.length) { %><p><%=info%></p><% } %><span class="arrow"></span></div>',a={url:"url格式不合法",email:"email格式不合法",number:"请输入一个数字",max:"值必须小于或等于",min:"值必须大于或等于",date:"日期格式不合法",time:"时间格式不合法",color:"颜色格式不合法",required:"请填写此项",pattern:"不符合要求格式"},o=e("body"),s=e(window),l=n.extend({initialize:function(){var t=this;l.superClass.initialize.apply(t,arguments);t.phs3=[],t.msg3=[],t.list3=[],t.action3=[];t.bind("required",function(e){t.tip(e,a["required"])});t.bind("url",function(e){t.tip(e,a["url"])});t.bind("email",function(e){t.tip(e,a["email"])});t.bind("number",function(e){t.tip(e,a["number"])});t.bind("max",function(e,n){t.tip(e,a["max"]+n)});t.bind("min",function(e,n){t.tip(e,a["min"]+n)});t.bind("date",function(e){t.tip(e,a["date"])});t.bind("time",function(e){t.tip(e,a["time"])});t.bind("color",function(e){t.tip(e,a["color"])});t.bind("required",function(e){t.tip(e,a["required"])});t.bind("pattern",function(e){t.tip(e,a["pattern"])});t.bind("placeholder",function(t,n){t=e(t);if(n)t.addClass("g_placeholder");else t.removeClass("g_placeholder")});t.bind("input",function(e){t.clear(e)});if(!i.NATIVE){var n=t.form2.find("input[placeholder]");n.each(function(n,i){var r=t.placeholder(i),a=r.state();if(a)e(i).addClass("g_placeholder")})}},tip:function(n,i){console&&console.warn&&console.warn(n);var a=this;a.clearAll();a.list3.push(n);a.phs3.push(n[0]);n.addClass("g_valid");var l=e(t.convertTpl(r,{msg:i,info:n.attr("title")||""}));l.css({left:n.offset().left,top:n.offset().top+n.outerHeight()+7});l.click(function(){n.focus()});a.msg3.push(l);o.append(l);var u=l.offset().top+l.outerHeight()-s.scrollTop()-s.height();if(u>0)s.scrollTop(s.scrollTop()+u);var c=4,d;a.action3.push(d=setInterval(function(){l.css("left",l.offset().left+c);if(c<0)++c;if(0==c){clearInterval(d);return}c*=-1},50));if(s.scrollTop()>n.offset().top)s.scrollTop(n.offset().top);else if(s.scrollTop()+s.height()<n.offset().top+n.height())s.scrollTop(n.offset().top+n.height()-s.height());if(a.ct)clearTimeout(a.ct);a.ct=setTimeout(function(){a.clearAll()},5e3);return this},clear:function(t){if("string"==e.type(t))t=e(t);var n=this.phs3.indexOf(t[0]);if(n!=-1){this.phs3.splice(n,1);this.list3.splice(n,1);this.msg3[n].remove();this.msg3.splice(n,1);clearInterval(this.action3[n]);this.action3.splice(n,1);t.removeClass("g_valid")}return this},clearAll:function(){this.phs3=[];while(this.msg3.length)this.msg3.pop().remove();while(this.list3.length)this.list3.pop().removeClass("g_valid");while(this.action3.length){var e=this.action3.pop();clearInterval(e)}return this}});return l});define("tui/cookie",[],function(){return function(e,t,n,i){if("string"==typeof e){i=n;n=t;t=e;e=window}if(void 0!==n){i=i||{};var r,a="";if(i.expires){if(i.expires.constructor==Date)r=i.expires;else{r=new Date;r.setTime(r.getTime()+1e3*60*60*24*i.expires)}a="; expires="+r.toGMTString()}var o=i.path?"; path="+i.path:"";var s=i.domain?"; domain="+i.domain:"";var l=i.secure?"; secure":"";e.document.cookie=[t,"=",encodeURIComponent(n),a,o,s,l].join("")}else{n=e.document.cookie.match(new RegExp("(?:\\s|^)"+t+"\\=([^;]*)"));return n?decodeURIComponent(n[1]):null}}});define("m/login",["tui/cookie","tui/event","tui/art","tui/dialog","tui/html5form","tui/countdown","m/model"],function(t,n,i,r,a,o,s,l,u){var c="jishachengta.com.cn";var d=window.base_domain||"";var f=new n;var p='欢迎访问集沙成塔 <a href="<%=domain%>/ucenter/" class="uname" target="_blank"><%=u_name%></a><a href="#" class="jsLogout">退出</a>\n|<a href="<%=domain%>/ucenter/order" target="_blank">支持的项目</a>';var v=i.compile(p);var h='<h3>登录</h3>\n<a href="#" class="close" data-role="close">X</a>\n<form id="loginForm">\n<div class="l"><input class="tel" type="text" pattern= "^1[3|5|8|7|4|6]\\d{9}" placeholder="手机号" required /><i class="icon"></i></div>\n<div class="l"><input class="pwd" type="password" pattern="^\\w{6,}" placeholder="密码" required /><i class="icon icon2"></i></div>\n<p class="p"><a href="<%=url%>" target="_blank">忘记密码了？</a></p>\n<div class="btn">\n<a class="submit" href="#">登 录</a>\n</div>\n</form>\n<div class="foot">\n没有账户？<a href="#" target="_blank" class="b goreg">注册账户</a>\n</div>';var m=i.compile(h);var g='<h3>注册新账户</h3>\n<a href="#" class="close" data-role="close">X</a>\n<div class="l l2">已有账户？<a href="#" class="login">登录</a></div>\n<form id="regForm">\n<div class="l"><input class="tel" name="tel" type="text" pattern= "^1[3|5|8|7|4|6]\\d{9}" placeholder="请输入您的手机号(必填)" required /><i class="icon icon3"></i></div>\n<div class="l"><input class="username" name="username" type="text" placeholder="请输入您的真实姓名(必填)" required /><i class="icon"></i></div>\n<div class="l"><input class="pwd" name="pwd" type="password" placeholder="请设置密码，不少于6位(必填)" required /><i class="icon icon2"></i></div>\n<div class="l"><input class="ckpwd" name="checkpwd" type="password" placeholder="请再次输入密码(必填)" /><i class="icon icon2"></i></div>\n<div class="l"><input class="code" name="code" type="text" placeholder="请输入验证码(必填)" required /><a href="#" class="send">获取手机验证码</a></i></div>\n<div class="l"><input class="recmobile" name="recmobile" type="text" placeholder="请输入推荐人的手机号(选填)" /><i class="icon icon3"></i></div>\n<div class="btn">\n<a class="submit" href="#">提交注册</a>\n</div>\n</form>\n<div class="foot">\n注册即代表同意<a href="<%=domain%>/about/service" target="_blank" class="b">集沙成塔服务条款</a>\n</div>';var b=i.compile(g);var w={domain:c,path:"/"};var y=/^1[3|5|8|7|4|6]\d{9}/;var x=t("u_id");var _=t("u_name");var k=t("u_pic");f.isLogin=function(){x=t("u_id");_=t("u_name");k=t("u_pic");return x&&"0"!=x};function T(){}function M(e){e=e||{};k=e.u_pic;x=e.u_id;_=e.u_name;t("u_id",x,w);t("u_name",_,w);t("u_pic",k,w)}function $(){t("u_id",0,{domain:c,path:"/",expires:"Thu, 01 Jan 1970 00:00:01 GMT"});t("u_name",0,{domain:c,path:"/",expires:"Thu, 01 Jan 1970 00:00:01 GMT"});t("u_pic",0,{domain:c,path:"/",expires:"Thu, 01 Jan 1970 00:00:01 GMT"})}function C(t,n){t.domain=d;e("#gUser").html(v(t));n&&M(t)}f.autoLogin=function(e,t){if(f.isLogin())C({u_id:x,u_name:_,u_pic:k})};f.userInfo=function(){return f.isLogin()?{u_id:x,u_name:_,u_pic:k}:false};function L(t,n){var i=new r({className:"login_dialog reg_dialog",content:b({domain:d})});var o=i.dom.content;var l=o.find("form");var u=l.find(".tel");var c=l.find(".pwd");var p=l.find(".ckpwd");var v=l.find(".username");var h=l.find(".code");var m=l.find(".recmobile");var g=new a(l,a.VALID_BLUR);var w={};var x;o.on("click",".submit",function(e){e.preventDefault();w.mobile=u.val().trim();if(!y.test(w.mobile)){g.tip(u,"请填写正确的手机号码");return}if(!x){g.tip(u,"该手机号码已注册");return}w.pwd=c.val().trim();if(!/^\w{6,}$/.test(w.pwd)){g.tip(c,"请输入至少六位数的密码");return}w.ckpwd=p.val().trim();if(w.ckpwd!==w.pwd){g.tip(p,"两次输入的密码不一致");return}w.realname=v.val().trim();if(!w.realname.length){g.tip(v,"请输入真实的姓名");return}w.code=h.val().trim();if(!w.code.length){g.tip(h,"请输入手机验证码");return}w.recmobile=m.val().trim();if(w.recmobile.length&&!y.test(w.recmobile)){g.tip(m,"请填写正确的手机号码");return}w.act=2;s.postData(w,function(e){r.alert("注册成功，请重新登录。");n&&n();i.close();g.clearAll()},T,true)}).on("click",".login",function(e){e.preventDefault();i.close();g.clearAll();f.needLogin()}).on("blur",".ckpwd",function(){var t=e(this).val().trim();var n=c.val().trim();if(t&&t!==n)g.tip(p,"两次输入的密码不一致")}).on("blur",".tel",function(t){t.preventDefault();var n=e(this).val().trim();if(!y.test(n)){g.tip(u,"请填写正确的手机号码");return}if(x)return;s.getData({act:6,mobile:n},function(e){if(1==e.data){g.tip(u,"该手机号码已注册");x=false}else x=true})}).on("change",".tel",function(e){x=false}).on("click",".send",function(t){t.preventDefault();var n=e(this);if(!n.hasClass("sending"))D(n,u,g)})}function D(e,t,n){var i=t.val().trim();if(!y.test(i)){n.tip(t,"请填写正确的手机号码");return}e.html("<i>60</i>秒后可重新获取").addClass("sending");var r=e.find("i");o(r,60,function(){e.html("获取手机验证码").removeClass("sending")});s.getData({act:5,mobile:i},function(e){if(e.data)console.log(e.msg)})}f.needLogin=function(e,t){if("function"===typeof e){t=e;e={}}else e=e||{};if(f.isLogin()){t&&t();return}if(e.reg){L(e,t);return}var n=new r({className:"login_dialog",content:m({url:d+"/findpass/step1"})});var i=n.dom.content;var o=i.find("form");var l=o.find(".tel");var u=o.find(".pwd");var c=new a(o,a.VALID_BLUR);var p={};i.on("click",".submit",function(e){e.preventDefault();p.username=l.val().trim();if(!y.test(p.username)){c.tip(l,"请填写正确的手机号码");return}p.password=u.val().trim();if(!p.password.length){c.tip(u,"请输入密码");return}p.act=3;s.postData(p,function(e){C({u_id:e.data.userId,u_name:e.data.username||e.data.realname,u_pic:"http://u1.tdimg.com/u/U-01.gif"},true);t&&t();n.close();c.clearAll()},T,true)}).on("click",".goreg",function(i){i.preventDefault();n.close();c.clearAll();L(e,t)})};f.exit=function(t){r.confirm("您确认要退出嘛？",function(){var n=/ucenter/.test(location.pathname);s.getData({act:8},function(){e("#gUser").html('欢迎访问集沙成塔<a class="login" href="#" id="gLogin" title="请登录">请登录</a>|<a class="reg" href="#" id="gReg" title="免费注册">免费注册</a>');$();if(n)location.reload();if(t)t()},T,true)})};return f});define("m/nav",["tui/art","m/login"],function(t,n,i,r){n.autoLogin();function a(){e(".mini-nav").on("mouseenter",".btn-qrcode",function(){e(this).find(".qrcode").css({height:"auto"})}).on("mouseleave",".sns",function(){e(this).find(".qrcode").css({height:"0"})})}function o(){e("#gUser").on("click","#gLogin, #gReg",function(t){t.preventDefault();var i=e(this).attr("id");n.needLogin({reg:"gReg"==i})}).on("click",".jsLogout",function(e){e.preventDefault();n.exit()})}r.init=function(){o();a()}});require(["m/nav","module/odometer","module/slider","tui/util/num"],function(t,n,i,r){t.init();window.odometerOptions={format:"(,ddd)"};var a=e("#jsFocus");var o=new i({box:a,tab:".btns a",panel:"li",fade:true,duration:500,loop:5e3});a.on("click",".prev",function(e){e.preventDefault();l()}).on("click",".next",function(e){e.preventDefault();s()}).on("mouseenter",function(){e(this).addClass("hover");o.stop()}).on("mouseleave",function(){e(this).removeClass("hover");o.start()});function s(){var e=o.current;if(e>o.size)o.go(0);else o.next(true)}function l(){var e=o.current;if(e<1)o.go(o.size-1);else o.prev(true)}if(e.browser.msie&&"6.0"==e.browser.version)document.execCommand("BackgroundImageCache",false,true);var u=e.browser.msie&&parseInt(e.browser.version<8);e(".odometer").each(function(t,i){var a=e(i).attr("data-num");if(!u){var o=new n({el:i,value:0});o.update(a)}else e(i).text(r.split(a))})})}(window.jQuery);;